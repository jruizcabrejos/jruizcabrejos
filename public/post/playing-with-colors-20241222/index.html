<!doctype html>
<!-- This site was created with Hugo Blox. https://hugoblox.com -->
<!-- Last Published: May 21, 2025 --><html lang="en-us" dir="ltr"
      data-wc-theme-default="system">
  
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="generator" content="Hugo Blox Builder 0.3.1" />

  
  












  
  
  
  
  
    
    
    
  
  

  

  
  
  
    
  
  <meta name="description" content="Working with colors as data in R. Palettes, dominant color quantification and K-means." />

  
  <link rel="alternate" hreflang="en-us" href="https://jruizcabrejos.com/post/playing-with-colors-20241222/" />

  
  
  
  
    
    <link rel="stylesheet" href="/css/themes/indigo.min.css" />
  

  
  
    
    <link href="/dist/wc.min.css" rel="stylesheet" />
  

  
  
  

  

  <script>
     
    window.hbb = {
       defaultTheme: document.documentElement.dataset.wcThemeDefault,
       setDarkTheme: () => {
        document.documentElement.classList.add("dark");
        document.documentElement.style.colorScheme = "dark";
      },
       setLightTheme: () => {
        document.documentElement.classList.remove("dark");
        document.documentElement.style.colorScheme = "light";
      }
    }

    console.debug(`Default Hugo Blox Builder theme is ${window.hbb.defaultTheme}`);

    if ("wc-color-theme" in localStorage) {
      localStorage.getItem("wc-color-theme") === "dark" ? window.hbb.setDarkTheme() : window.hbb.setLightTheme();
    } else {
      window.hbb.defaultTheme === "dark" ? window.hbb.setDarkTheme() : window.hbb.setLightTheme();
      if (window.hbb.defaultTheme === "system") {
        window.matchMedia("(prefers-color-scheme: dark)").matches ? window.hbb.setDarkTheme() : window.hbb.setLightTheme();
      }
    }
  </script>

  <script>
    
    document.addEventListener('DOMContentLoaded', function () {
      
      let checkboxes = document.querySelectorAll('li input[type=\'checkbox\'][disabled]');
      checkboxes.forEach(e => {
        e.parentElement.parentElement.classList.add('task-list');
      });

      
      const liNodes = document.querySelectorAll('.task-list li');
      liNodes.forEach(nodes => {
        let textNodes = Array.from(nodes.childNodes).filter(node => node.nodeType === 3 && node.textContent.trim().length > 1);
        if (textNodes.length > 0) {
          const span = document.createElement('label');
          textNodes[0].after(span);  
          span.appendChild(nodes.querySelector('input[type=\'checkbox\']'));
          span.appendChild(textNodes[0]);
        }
      });
    });
  </script>

  
  
  












<script async src="https://www.googletagmanager.com/gtag/js?id=G-1G3L1R16MX"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'G-1G3L1R16MX', {});
  gtag('set', {'cookie_flags': 'SameSite=None;Secure'});

  
  document.addEventListener('click', onClickCallback, false);
</script>



























  
  

  
  <link rel="icon" type="image/png" href="/media/icon_hu2056443408962411704.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu12196561082040145508.png" />

  <link rel="canonical" href="https://jruizcabrejos.com/post/playing-with-colors-20241222/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@jruizcabrejos" />
    <meta property="twitter:creator" content="@jruizcabrejos" />
  
  <meta property="og:site_name" content="Jorge Ruiz-Cabrejos" />
  <meta property="og:url" content="https://jruizcabrejos.com/post/playing-with-colors-20241222/" />
  <meta property="og:title" content="Playing with colors in R | Jorge Ruiz-Cabrejos" />
  <meta property="og:description" content="Working with colors as data in R. Palettes, dominant color quantification and K-means." /><meta property="og:image" content="https://jruizcabrejos.com/post/playing-with-colors-20241222/featured.png" />
    <meta property="twitter:image" content="https://jruizcabrejos.com/post/playing-with-colors-20241222/featured.png" /><meta property="og:locale" content="en-us" />
  
    
      <meta
        property="article:published_time"
        content="2024-12-22T00:00:00&#43;00:00"
      />
    
    <meta property="article:modified_time" content="2024-12-22T00:00:00&#43;00:00">
  

  



  


  <title>Playing with colors in R | Jorge Ruiz-Cabrejos</title>

  
  
  
  
  
    
    
  
  
  <style>
    @font-face {
      font-family: 'Inter var';
      font-style: normal;
      font-weight: 100 900;
      font-display: swap;
      src: url(/dist/font/Inter.var.woff2) format(woff2);
    }
  </style>

  

  
  


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    
      
      
        
        
          
        
          
        
          
        
          
        
          
        
        
        
      
    
  
  
  
  
  
  
  
  
  
  
  
  
  
    
      
      
        
        
          
        
          
        
          
        
          
        
          
        
        
        
      
    
      
      
        
        
          
        
          
        
          
        
          
        
          
        
        
        
      
    
      
      
        
        
          
        
          
        
          
        
          
        
          
        
        
        
      
    
      
      
    
  
  
  
  
  
  
  
  
  
  







<link type="text/css" rel="stylesheet" href="/dist/pagefind/pagefind-ui.be766eb419317a14ec769d216e9779bfe8f3737c80e780f4ba0dafb57a41a482.css" integrity="sha256-vnZutBkxehTsdp0hbpd5v&#43;jzc3yA54D0ug2vtXpBpII=" />


<script src="/dist/pagefind/pagefind-ui.87693d7c6f2b3b347ce359d0ede762c033419f0a32b22ce508c335a81d841f1b.js" integrity="sha256-h2k9fG8rOzR841nQ7ediwDNBnwoysizlCMM1qB2EHxs="></script>


<script>window.hbb.pagefind = {"baseUrl":"/"};</script>

<style>
  html.dark {
    --pagefind-ui-primary: #eeeeee;
    --pagefind-ui-text: #eeeeee;
    --pagefind-ui-background: #152028;
    --pagefind-ui-border: #152028;
    --pagefind-ui-tag: #152028;
  }
</style>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    new PagefindUI({
      element: "#search",
      showSubResults: true,
      baseUrl: window.hbb.pagefind.baseUrl,
      bundlePath: window.hbb.pagefind.baseUrl + "pagefind/",
    });
  });
  document.addEventListener('DOMContentLoaded', () => {
    let element = document.getElementById('search');
    let trigger = document.getElementById('search_toggle');

    if (trigger) {
      trigger.addEventListener('click', () => {
        element.classList.toggle('hidden');
        element.querySelector("input").value = ""
        element.querySelector("input").focus()

        if (!element.classList.contains('hidden')) {
          let clear_trigger = document.querySelector('.pagefind-ui__search-clear');

          if (clear_trigger && !clear_trigger.hasAttribute('listenerOnClick')) {
            clear_trigger.setAttribute('listenerOnClick', 'true');

            clear_trigger.addEventListener('click', () => {
              element.classList.toggle('hidden');
            });
          }
        }

      });
    }
  });
</script>















  
  
  
  
  
  
  
  <script
    defer
    src="/js/hugo-blox-en.min.8c8ea06bd0420f5067e52fa727b9f92303757322ba4431774153d59a9735eadb.js"
    integrity="sha256-jI6ga9BCD1Bn5S&#43;nJ7n5IwN1cyK6RDF3QVPVmpc16ts="
  ></script>

  
  











</head>

  <body class="dark:bg-hb-dark dark:text-white page-wrapper" id="top">
    <div id="page-bg"></div>
    <div class="page-header sticky top-0 z-30">
      
      
      
        
        
        
          <header id="site-header" class="header">
  <nav class="navbar px-3 flex justify-left">
    <div class="order-0 h-100">
      
      <a class="navbar-brand" href="/" title="Jorge Ruiz-Cabrejos">
        Jorge R.
      </a>
    </div>
    
    <input id="nav-toggle" type="checkbox" class="hidden" />
    <label
      for="nav-toggle"
      class="order-3 cursor-pointer flex items-center lg:hidden text-dark dark:text-white lg:order-1">
      <svg id="show-button" class="h-6 fill-current block" viewBox="0 0 20 20">
        <title>Open Menu</title>
        <path d="M0 3h20v2H0V3z m0 6h20v2H0V9z m0 6h20v2H0V0z"></path>
      </svg>
      <svg id="hide-button" class="h-6 fill-current hidden" viewBox="0 0 20 20">
        <title>Close Menu</title>
        <polygon
          points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2"
          transform="rotate(45 10 10)"></polygon>
      </svg>
    </label>
    

    
    
    <ul
      id="nav-menu"
      class="navbar-nav order-3 hidden lg:flex w-full pb-6 lg:order-1 lg:w-auto lg:space-x-2 lg:pb-0 xl:space-x-8 justify-left
      ">
      
      
      
      
      
      
      <li class="nav-item">
        <a
          class="nav-link "
          
          href="/"
        >Me</a
        >
      </li>
      
      
      
      
      
      
      <li class="nav-item">
        <a
          class="nav-link "
          
          href="/publications/"
        >Publications</a
        >
      </li>
      
      
      
      
      
      
      <li class="nav-item">
        <a
          class="nav-link "
          
          href="/post/"
        >Posts</a
        >
      </li>
      
      
      
      
      
      
      <li class="nav-item">
        <a
          class="nav-link "
          
          href="/projects/"
        >Projects</a
        >
      </li>
      
      
      
    </ul>

    <div class="order-1 ml-auto flex items-center md:order-2 lg:ml-0">

      
      
      
      <button
        aria-label="search"
        class="text-black hover:text-primary  inline-block px-3 text-xl dark:text-white"
        id="search_toggle">
        <svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512" fill="currentColor"><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/></svg>
      </button>
      

      
      
      <div class="px-3 text-black hover:text-primary-700 dark:text-white dark:hover:text-primary-300
            [&.active]:font-bold [&.active]:text-black/90 dark:[&.active]:text-white">
        <button class="theme-toggle mt-1" accesskey="t" title="appearance">
          <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
               stroke-linejoin="round" class="dark:hidden">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
          <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
               stroke-linejoin="round" class=" dark:block [&:not(dark)]:hidden">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
        </button>
      </div>
      

      
      

      
      
    </div>
  </nav>
</header>


<div id="search" class="hidden p-3"></div>


        
      
    </div>
    <div class="page-body  my-10">
      





<div class="mx-auto flex max-w-screen-xl">
  



<aside class="hb-sidebar-container max-lg:[transform:translate3d(0,-100%,0)] lg:hidden xl:block">
  
  <div class="px-4 pt-4 lg:hidden">
    
    
  </div>
  <div class="hb-scrollbar lg:h-[calc(100vh-var(--navbar-height))]">
    <ul class="flex flex-col gap-1 lg:hidden">
      
      
        <li class="open"><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/post/"
    
  >Posts
        <span data-hb-sidebar-toggle>
            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-[18px] min-w-[18px] rounded-sm p-0.5 hover:bg-gray-800/5 dark:hover:bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="origin-center transition-transform rtl:-rotate-180"></path></svg>
        </span>
    </a><div class="ltr:pr-0 overflow-hidden">
        <ul class="hb-sidebar-list"><li class="flex flex-col "><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/post/colorful-open-access-20250429/"
    
  >Colorful Open Access: Sci-Hub, Free Libraries, and Their Alternatives
    </a>
              
            </li><li class="flex flex-col "><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/post/subverting-and-exploiting-artificial-intelligence-20250410/"
    
  >Subverting and exploiting ChatGPT-like applications in a post-LLM world
    </a>
              
            </li><li class="flex flex-col "><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/post/accessible-frugality-barcelona-trash-collection-data-20250201/"
    
  >Accesibble Frugality: Barcelona Trastos Data
    </a>
              
            </li><li class="flex flex-col open"><a
    class="hb-sidebar-custom-link
      sidebar-active-item bg-primary-100 font-semibold text-primary-800 dark:bg-primary-300 dark:text-primary-900"
    href="/post/playing-with-colors-20241222/"
    
  >Playing with colors in R
    </a>
  
    <ul class="hb-sidebar-mobile-toc"><li>
              <a
                href="#grey-not-the-serie"
                class="hb-docs-link"
              >Grey (not the serie)</a>
            </li>
          <li>
              <a
                href="#colors-in-r"
                class="hb-docs-link"
              >Colors in R</a>
            </li>
          <li>
              <a
                href="#image-color-analysis-in-r"
                class="hb-docs-link"
              >Image color analysis in R</a>
            </li>
          <li>
              <a
                href="#playing-with-color-data-in-r"
                class="hb-docs-link"
              >Playing with color data in R</a>
            </li>
          <li>
              <a
                href="#interesting-things-i-found-while-playing-with-colors-in-r"
                class="hb-docs-link"
              >Interesting things I found while playing with colors in R</a>
            </li>
          <li>
              <a
                href="#footnote"
                class="hb-docs-link"
              >Footnote</a>
            </li>
          <li>
              <a
                href="#references"
                class="hb-docs-link"
              >References</a>
            </li>
          </ul>
  
              
            </li><li class="flex flex-col "><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/post/if-it-is-art-it-is-legal-20241215/"
    
  >If it is art, it is fair use
    </a>
              
            </li><li class="flex flex-col "><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/post/hello-world-i-guess-20241209/"
    
  >Hello World, I guess
    </a>
              
            </li><li class="flex flex-col "><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/post/template-19960725/"
    
  >Lorem is Ipsum
    </a>
              
            </li></ul>
      </div></li>
        <li class=""><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/project/"
    
  >Projects
        <span data-hb-sidebar-toggle>
            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-[18px] min-w-[18px] rounded-sm p-0.5 hover:bg-gray-800/5 dark:hover:bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="origin-center transition-transform rtl:-rotate-180"></path></svg>
        </span>
    </a><div class="ltr:pr-0 overflow-hidden">
        <ul class="hb-sidebar-list"><li class="flex flex-col "><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/project/rayolaser/"
    
  >RayoLaser
    </a>
              
            </li><li class="flex flex-col "><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/project/wclr/"
    
  >wclR
    </a>
              
            </li></ul>
      </div></li>
        <li class=""><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/projects/"
    
  >Projects
    </a></li>
        <li class=""><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/publications/"
    
  >Publications
        <span data-hb-sidebar-toggle>
            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-[18px] min-w-[18px] rounded-sm p-0.5 hover:bg-gray-800/5 dark:hover:bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="origin-center transition-transform rtl:-rotate-180"></path></svg>
        </span>
    </a><div class="ltr:pr-0 overflow-hidden">
        <ul class="hb-sidebar-list"><li class="flex flex-col "><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/publications/journal-article-6/"
    
  >Malaria seroepidemiology in very low transmission settings in the Peruvian Amazon
    </a>
              
            </li><li class="flex flex-col "><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/publications/journal-article-5/"
    
  >Bovine lactoferrin for the prevention of COVID-19 infection in health care personnel a double-blinded randomized clinical trial (LF-COVID)
    </a>
              
            </li><li class="flex flex-col "><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/publications/journal-article-4/"
    
  >Quantifying the effect of human population mobility on malaria risk in the Peruvian Amazon
    </a>
              
            </li><li class="flex flex-col "><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/publications/journal-article-3/"
    
  >The study introduces an open-source, 3D-printable GPS tracker to monitor human movement and its influence on malaria epidemiology in river networks. Tested in the Peruvian Amazon, it provides insights into mobility patterns critical for malaria control strategies.
    </a>
              
            </li><li class="flex flex-col "><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/publications/journal-article-2/"
    
  >Use of open mobile mapping tool to assess human mobility traceability in rural offline populations with contrasting malaria dynamics
    </a>
              
            </li><li class="flex flex-col "><a
    class="hb-sidebar-custom-link
      text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-primary-800 dark:hover:text-gray-50"
    href="/publications/journal-article-1/"
    
  >High-accuracy detection of malaria vector larval habitats using drone-based multispectral imagery
    </a>
              
            </li></ul>
      </div></li>
    </ul>

    <div class="max-xl:hidden h-0 w-64 shrink-0"></div></div>

</aside>
  

<nav class="hb-toc order-last hidden w-64 shrink-0 xl:block print:hidden px-4" aria-label="table of contents">
  











  <div class="hb-scrollbar text-sm [hyphens:auto] sticky top-16 overflow-y-auto pr-4 pt-6 max-h-[calc(100vh-var(--navbar-height)-env(safe-area-inset-bottom))] -mr-4 rtl:-ml-4"><p class="mb-4 font-semibold tracking-tight">On this page</p><ul>
      <li class="my-2 scroll-my-6 scroll-py-6">
        <a class="font-semibold inline-block text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300 w-full break-words" href="#grey-not-the-serie">Grey (not the serie)</a>
      </li>
      <li class="my-2 scroll-my-6 scroll-py-6">
        <a class="font-semibold inline-block text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300 w-full break-words" href="#colors-in-r">Colors in R</a>
      </li>
      <li class="my-2 scroll-my-6 scroll-py-6">
        <a class="font-semibold inline-block text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300 w-full break-words" href="#image-color-analysis-in-r">Image color analysis in R</a>
      </li>
      <li class="my-2 scroll-my-6 scroll-py-6">
        <a class="font-semibold inline-block text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300 w-full break-words" href="#playing-with-color-data-in-r">Playing with color data in R</a>
      </li>
      <li class="my-2 scroll-my-6 scroll-py-6">
        <a class="font-semibold inline-block text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300 w-full break-words" href="#interesting-things-i-found-while-playing-with-colors-in-r">Interesting things I found while playing with colors in R</a>
      </li>
      <li class="my-2 scroll-my-6 scroll-py-6">
        <a class="font-semibold inline-block text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300 w-full break-words" href="#footnote">Footnote</a>
      </li>
      <li class="my-2 scroll-my-6 scroll-py-6">
        <a class="font-semibold inline-block text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300 w-full break-words" href="#references">References</a>
      </li></ul>

  
  
    
    
  



    












  </div>
  </nav>


  <article class="w-full break-words flex min-h-[calc(100vh-var(--navbar-height))] min-w-0 justify-center pb-8 pr-[calc(env(safe-area-inset-right)-1.5rem)]">
    <main class="w-full min-w-0 max-w-6xl px-6 pt-4 md:px-12">

      

      <h1 class="mt-2 text-4xl font-bold tracking-tight text-slate-900 dark:text-slate-100">Playing with colors in R</h1>

      <div class="mt-4 mb-16">
      <div class="text-gray-500 dark:text-gray-300 text-sm flex items-center flex-wrap gap-y-2"><span class="mr-1">Dec 22, 2024</span><span class="mx-1">·</span>
        
          
          
          <div class="group inline-flex items-center text-current gap-x-1.5 mx-1">
            
            
            <img src="/author/avatar_hu1055330542162537812.webp" alt="" class="inline-block h-4 w-4 rounded-full border border-current" loading="lazy" />
            
            <div ></div>
          </div>
          
        

        
        <span class="mx-1">·</span>
        <span class="mx-1">
          8 min read
        </span>
        
        </div>

        <div class="mt-3">
          





        </div>
      </div>



      
      
      
      
      

      
      
      
      
      
      
      
      
      
      
      <div class="article-header article-container featured-image-wrapper mt-4 mb-16" style="max-width: 720px; max-height: 501px;">
        <div style="position: relative">
          <img src="/post/playing-with-colors-20241222/featured_hu8936042713245865622.webp" width="720" height="501" alt="" class="featured-image">
          <span class="article-header-caption">Illustration by  サクヤ (x.com/7UU61): <a href="https://www.youtube.com/watch?v=NMiQmumW0nI" target="_blank" rel="noopener"><strong>From ノウナイディスコ / IA [CeVIO AI] - By r-906</strong></a></span>
        </div>
      </div>
      

      
      

      <div class="prose prose-slate lg:prose-xl dark:prose-invert">
        <h2 id="grey-not-the-serie">Grey (not the serie)</h2>
<p>As a kid, whenever I had different colors of paint or colored modelling clay <a href="https://www.thatsatrademark.com/blog/play-doh-scent" target="_blank" rel="noopener">(PLAY-DOH®)</a> on my hands, I would inevitably end up mixing all of them in an attempt to make this imaginary &ldquo;super&rdquo; color.</p>
<p>The result would always end up being the same: An ugly grey-ish dark mud color—the kind you get from such a mix.</p>
<img src="./greymud.png" alt="Favicon">
<figcaption>Figure 1. Attempt at recreating the mud-like color I remember as a kid by overlaying transparent backgrounds of different color.</figcaption>
<p>I had no idea at the time (and realistically, I still probably don&rsquo;t) that there is a whole field dedicated to studying color theory and that the color I was getting is the result of subtractive color mixing.</p>
<p>You mix <em>materials</em>, you get dark. You mix <em>light</em>, and you get white.</p>
<h2 id="colors-in-r">Colors in R</h2>
<p>In all of my introductory classes or lectures about R, one of the first documents my students are introduced to is the <a href="https://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf" target="_blank" rel="noopener">2006 R colors cheat-sheet</a> by <a href="https://yingweistat.com/" target="_blank" rel="noopener">Ying Wei</a>, which neatly displays the 657 available colors in R base (<code>colors()</code>) in <em>only</em> 7 pages.</p>
<p>For a more diverse selection of colors, palettes, and themes, there is a <a href="https://github.com/EmilHvitfeldt/r-color-palettes" target="_blank" rel="noopener">Comprehensive list of color palettes in R</a> by <a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">Emil Hvitfeldt</a>, which  provides an extensive compilation of packages and resources for colors (in R).</p>
<img src="./logos_all.png" alt="Favicon">
<figcaption>Figure 2. Some of the R packages available in the comprehensive list.</figcaption>
<p>Whenever I am able to, I try to make my own palette while playing with <a href="https://paletton.com/" target="_blank" rel="noopener">Paletton</a>, a comprehensive color selection tool to pick your ideal color scheme. And when I inevitably fail on making an appealing color selection, I use palettes from some of these R packages:</p>
<ul>
<li>
<p><a href="https://github.com/BlakeRMills/MetBrewer" target="_blank" rel="noopener">MetBrewer</a></p>
<ul>
<li>MET (Metropolitan Museum of Art in New York)</li>
</ul>
</li>
<li>
<p><a href="https://cran.r-project.org/web/packages/ggsci/vignettes/ggsci.html" target="_blank" rel="noopener">Scientific Journal and Sci-Fi</a></p>
<ul>
<li>Lancet, BMJ, JAMA&hellip;</li>
</ul>
</li>
<li>
<p><a href="https://github.com/MatthewBJane/ThemePark" target="_blank" rel="noopener">ThemePark</a></p>
<ul>
<li>Themes for Game of Thrones, Barbie, The Simpsons&hellip;</li>
</ul>
</li>
<li>
<p><a href="https://github.com/healthinnovation/innovar" target="_blank" rel="noopener">Innovar</a></p>
<ul>
<li>Palette collection of the <a href="https://github.com/healthinnovation" target="_blank" rel="noopener">Health Innovation Lab</a></li>
</ul>
</li>
<li>
<p><a href="https://colorspace.r-forge.r-project.org/reference/hcl_palettes.html" target="_blank" rel="noopener">HCL colors</a></p>
<ul>
<li>Based on the HCL (hue-chroma-luminance) color model.</li>
</ul>
</li>
<li>
<p><a href="https://github.com/ewenme/ghibli" target="_blank" rel="noopener">Ghibli</a></p>
<ul>
<li>Based on: Spirited Away (2001), Kiki&rsquo;s Delivery Service(1989)&hellip;</li>
</ul>
</li>
<li>
<p><a href="https://github.com/karthik/wesanderson" target="_blank" rel="noopener">Wes Anderson</a></p>
<ul>
<li>Based on: Moonrise Kingdom (2012), The Life Aquatic with Steve Zissou (2004)&hellip;</li>
</ul>
</li>
</ul>
<p>The article on <a href="https://davidmathlogic.com/colorblind" target="_blank" rel="noopener">Coloring for Colorblindness</a> is also a solid resource I tend to use. Likewise, the interactive tool <a href="https://github.com/lucanelli/colorquest" target="_blank" rel="noopener">ColorQuest</a> from <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0290923" target="_blank" rel="noopener">Luca Nelli</a> is also helpful.</p>
<h2 id="image-color-analysis-in-r">Image color analysis in R</h2>
<p>The go-to package for image manipulation is ImageMagick or simply known as magick, a free and open-source cross-platform software for image manipulation with commands.</p>
<p>A big advantage of magick is being able to read most types of image files with a single function (<code>image_read()</code>), with the alternative being to use <code>jpeg::readJPEG()</code> and <code>png::readPNG()</code> for .jpg and .png files respectively.</p>
<p>For illustration purposes, I&rsquo;ll read the image in both .jpg and .png formats using both methods.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">img_magick.jpg</span> <span class="o">&lt;-</span> <span class="n">magick</span><span class="o">::</span><span class="nf">image_read</span><span class="p">(</span><span class="s">&#34;./6_32_Muumipeikko.jpg&#34;</span><span class="p">)</span> <span class="c1">## Magick JPG</span>
</span></span><span class="line"><span class="cl"><span class="n">img_magick.png</span> <span class="o">&lt;-</span> <span class="n">magick</span><span class="o">::</span><span class="nf">image_read</span><span class="p">(</span><span class="s">&#34;./6_32_Muumipeikko.png&#34;</span><span class="p">)</span> <span class="c1">## Magick PNG</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">img_jpg</span> <span class="o">&lt;-</span> <span class="n">jpeg</span><span class="o">::</span><span class="nf">readJPEG</span><span class="p">(</span><span class="s">&#34;./6_32_Muumipeikko.jpg&#34;</span><span class="p">)</span> <span class="c1">## JPG as array</span>
</span></span><span class="line"><span class="cl"><span class="n">img_png</span> <span class="o">&lt;-</span> <span class="n">png</span><span class="o">::</span><span class="nf">readPNG</span><span class="p">(</span><span class="s">&#34;./6_32_Muumipeikko.png&#34;</span><span class="p">)</span> <span class="c1">## PNG as array</span>
</span></span></code></pre></div><img src="./6_32_Muumipeikko.jpg" alt="Favicon">
<figcaption>Figure 3. Moomin.</figcaption>
<p>With magick you will notice you get an image alongside some metadata (e.g. width and height). With the other methods, you get an array of 4 values per pixel, corresponding to the sRGB values for that image.</p>
<p>For us to work with the magick file, we will need to first extract its data with <code>image_data()</code>, convert those values to numbers with <code>as.integer()</code> and finally divide by 255 (If you start countring from 0 to 255, you get 256 values, or what 8 bits are able to hold)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">img_magick.jpg_array</span> <span class="o">&lt;-</span> <span class="nf">as.integer</span><span class="p">(</span><span class="nf">image_data</span><span class="p">(</span><span class="n">img_magick.jpg</span><span class="p">,</span> <span class="s">&#39;rgb&#39;</span><span class="p">))</span><span class="o">/</span><span class="m">255</span> <span class="c1">## Magick JPG as array</span>
</span></span><span class="line"><span class="cl"><span class="n">img_magick.png_array</span> <span class="o">&lt;-</span> <span class="nf">as.integer</span><span class="p">(</span><span class="nf">image_data</span><span class="p">(</span><span class="n">img_magick.png</span><span class="p">,</span> <span class="s">&#39;rgb&#39;</span><span class="p">))</span><span class="o">/</span><span class="m">255</span> <span class="c1">## Magick PNG as array</span>
</span></span></code></pre></div><p>Now that all our objects are arrays, we transform those arrays into a data.frame for analysis and quantification.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1">## Function to transform our arrays into a 3 variable data.frame.</span>
</span></span><span class="line"><span class="cl"><span class="c1">## i.e. 3 columns for the Red, Green and Blue bands.</span>
</span></span><span class="line"><span class="cl"><span class="n">rgb_from_array_to_df</span> <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span><span class="n">img</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  <span class="nf">data.frame</span><span class="p">(</span><span class="n">R</span> <span class="o">=</span> <span class="nf">as.vector</span><span class="p">(</span><span class="n">img[</span><span class="p">,</span> <span class="p">,</span> <span class="m">1</span><span class="n">]</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">             <span class="n">G</span> <span class="o">=</span> <span class="nf">as.vector</span><span class="p">(</span><span class="n">img[</span><span class="p">,</span> <span class="p">,</span> <span class="m">2</span><span class="n">]</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">             <span class="n">B</span> <span class="o">=</span> <span class="nf">as.vector</span><span class="p">(</span><span class="n">img[</span><span class="p">,</span> <span class="p">,</span> <span class="m">3</span><span class="n">]</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1">## From now on you will notice that all four objects are essentially the same.</span>
</span></span><span class="line"><span class="cl"><span class="c1">## With maybe some differences between jpg and png files.</span>
</span></span><span class="line"><span class="cl"><span class="n">img_magick.jpg_df</span> <span class="o">&lt;-</span> <span class="nf">rgb_from_array_to_df</span><span class="p">(</span><span class="n">img_magick.jpg_array</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">img_magick.png_df</span> <span class="o">&lt;-</span> <span class="nf">rgb_from_array_to_df</span><span class="p">(</span><span class="n">img_magick.png_array</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">img_jpg_df</span> <span class="o">&lt;-</span> <span class="nf">rgb_from_array_to_df</span><span class="p">(</span><span class="n">img_jpg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">img_png_df</span> <span class="o">&lt;-</span> <span class="nf">rgb_from_array_to_df</span><span class="p">(</span><span class="n">img_png</span><span class="p">)</span>
</span></span></code></pre></div><p>The most common and basic form of analysis for images and colors (that I could find in a non-exhaustive Google Search) is applying a K-means clustering algorithm to find the most &ldquo;dominant&rdquo; colors in an image.</p>
<p>In short, K-means is an unsupervised machine learning technique that groups similar colors based on their cluster centroids until convergence is reached (i.e., until the predefined number of clusters (K) is achieved).</p>
<p>Here I will go for 10 clusters using the function <code>clara()</code>. You will notice this works on all four examples of the same image.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1">## Running clara() for all four to compare results later if needed.</span>
</span></span><span class="line"><span class="cl"><span class="c1">## And to check that they are read the same by the 2 functions.</span>
</span></span><span class="line"><span class="cl"><span class="n">img_magick.jpg_clara</span> <span class="o">&lt;-</span> <span class="n">cluster</span><span class="o">::</span><span class="nf">clara</span><span class="p">(</span><span class="n">img_magick.jpg_df</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="m">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">img_magick.png_clara</span> <span class="o">&lt;-</span> <span class="n">cluster</span><span class="o">::</span><span class="nf">clara</span><span class="p">(</span><span class="n">img_magick.png_df</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="m">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">img_jpg_df_clara</span> <span class="o">&lt;-</span> <span class="n">cluster</span><span class="o">::</span><span class="nf">clara</span><span class="p">(</span><span class="n">img_jpg_df</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="m">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">img_png_df_clara</span> <span class="o">&lt;-</span> <span class="n">cluster</span><span class="o">::</span><span class="nf">clara</span><span class="p">(</span><span class="n">img_png_df</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="m">10</span><span class="p">)</span>
</span></span></code></pre></div><img src="./plot_colors.png" alt="Favicon">
<figcaption>Figure 4. The 10 clustered colors extracted from the Moomin image.  <br>The vector `rgb(pmax(img_og_jpg.clara$medoids))` was used for this plot using ggplot.</figcaption>
<p>There are a lot of colors coming from the grass and the sky, and while it is true all of it is part of the image as a whole, I am more interested in the (moomin) art itself.</p>
<p>Here we can leverage magick functions and crop our image.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1">##Example using the object loaded as Magick PNG</span>
</span></span><span class="line"><span class="cl"><span class="n">image_info</span> <span class="o">&lt;-</span> <span class="nf">image_info</span><span class="p">(</span><span class="n">img_magick.png</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">square_size</span> <span class="o">&lt;-</span> <span class="nf">min</span><span class="p">(</span><span class="n">image_info</span><span class="o">$</span><span class="n">width</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                   <span class="n">image_info</span><span class="o">$</span><span class="n">height</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Calculate the coordinates for cropping from the center</span>
</span></span><span class="line"><span class="cl"><span class="n">x_offset</span> <span class="o">&lt;-</span> <span class="p">(</span><span class="n">image_info</span><span class="o">$</span><span class="n">width</span> <span class="o">-</span> <span class="n">square_size</span><span class="p">)</span> <span class="o">/</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl"><span class="n">y_offset</span> <span class="o">&lt;-</span> <span class="p">(</span><span class="n">image_info</span><span class="o">$</span><span class="n">height</span> <span class="o">-</span> <span class="n">square_size</span><span class="p">)</span> <span class="o">/</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Crop the image to a square from the center</span>
</span></span><span class="line"><span class="cl"><span class="n">crop_img_magick.png</span> <span class="o">&lt;-</span> <span class="nf">image_crop</span><span class="p">(</span><span class="n">img_magick.png</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                  <span class="nf">paste0</span><span class="p">(</span><span class="n">square_size</span><span class="p">,</span> <span class="s">&#34;x&#34;</span><span class="p">,</span> <span class="n">square_size</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                         <span class="s">&#34;+&#34;</span><span class="p">,</span> <span class="n">x_offset</span><span class="p">,</span> <span class="s">&#34;+&#34;</span><span class="p">,</span> <span class="n">y_offset</span><span class="p">))</span>
</span></span></code></pre></div><img src="./crop_img_magick.png" alt="Favicon">
<figcaption>Figure 5. Cropped Moomin.</figcaption>
<p>The crop isn’t perfect; ideally, I’d remove some of the dry grass still visible on the left and right sides. If we wanted to refine this further, we could automate the cropping by training an AI model using Keras and TensorFlow.</p>
<p>But I will leave it like that for now.</p>
<p>Now we re-run the analysis with k-means above for the cropped image, change our code a little bit, and compare results.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1">## This is how the entire &#34;pipeline&#34; would look like.</span>
</span></span><span class="line"><span class="cl"><span class="c1">## We start with an object of class `magick-image`.</span>
</span></span><span class="line"><span class="cl"><span class="n">crop_img_magick.png_array</span> <span class="o">&lt;-</span> <span class="n">crop_img_magick.png</span> <span class="o">%&gt;%</span>
</span></span><span class="line"><span class="cl">  <span class="nf">image_data</span><span class="p">(</span><span class="s">&#39;rgb&#39;</span><span class="p">)</span> <span class="o">%&gt;%</span>
</span></span><span class="line"><span class="cl">  <span class="nf">as.integer</span><span class="p">(</span><span class="n">.)</span><span class="o">/</span><span class="m">255</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">crop_img_magick.png_clara</span> <span class="o">&lt;-</span> <span class="nf">rgb_from_array_to_df</span><span class="p">(</span><span class="n">crop_img_magick.png_array</span><span class="p">)</span> <span class="o">%&gt;%</span>
</span></span><span class="line"><span class="cl">  <span class="n">cluster</span><span class="o">::</span><span class="nf">clara</span><span class="p">(</span><span class="n">k</span> <span class="o">=</span> <span class="m">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## We add our results to a dataframe for visualization.</span>
</span></span><span class="line"><span class="cl"><span class="n">crop_df</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">colors</span> <span class="o">=</span> <span class="nf">rgb</span><span class="p">(</span><span class="nf">pmax</span><span class="p">(</span><span class="n">crop_img_magick.png_clara</span><span class="o">$</span><span class="n">medoids</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl">                      <span class="n">size</span> <span class="o">=</span> <span class="n">crop_img_magick.png_clara</span><span class="o">$</span><span class="n">clusinfo[</span><span class="p">,</span><span class="m">1</span><span class="n">]</span><span class="p">)</span> <span class="o">%&gt;%</span>
</span></span><span class="line"><span class="cl">  <span class="nf">arrange</span><span class="p">(</span><span class="nf">desc</span><span class="p">(</span><span class="n">size</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">crop_df</span><span class="o">$</span><span class="n">colors_factor</span> <span class="o">&lt;-</span> <span class="nf">factor</span><span class="p">(</span><span class="n">crop_df</span><span class="o">$</span><span class="n">colors</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">crop_df</span><span class="o">$</span><span class="n">colors</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">crop_df</span><span class="o">$</span><span class="n">colors</span><span class="p">)</span>
</span></span></code></pre></div><img src="./comparison.png" alt="Favicon">
<figcaption>Figure 6. Moomin Comparison.</figcaption>
<p>The cropped image allows us to <em>capture</em> more of the blue colors within the image. Which should be a more accurate representation of what we are looking at.</p>
<p>Next we can use Principal Component Analysis (PCA) to convert our 3D points (R, G and B) into 2D values and visualize their distribution and variation.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">PCA_data</span> <span class="o">&lt;-</span> <span class="nf">rgb_from_array_to_df</span><span class="p">(</span><span class="n">crop_img_magick.png_array</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">PCA</span> <span class="o">&lt;-</span> <span class="nf">prcomp</span><span class="p">(</span><span class="n">PCA_data[</span><span class="p">,</span><span class="nf">c</span><span class="p">(</span><span class="s">&#34;R&#34;</span><span class="p">,</span><span class="s">&#34;G&#34;</span><span class="p">,</span><span class="s">&#34;B&#34;</span><span class="p">)</span><span class="n">]</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">PCA_data</span><span class="o">$</span><span class="n">u</span> <span class="o">=</span> <span class="n">PCA</span><span class="o">$</span><span class="n">x[</span><span class="p">,</span><span class="m">1</span><span class="n">]</span>
</span></span><span class="line"><span class="cl"><span class="n">PCA_data</span><span class="o">$</span><span class="n">v</span> <span class="o">=</span> <span class="n">PCA</span><span class="o">$</span><span class="n">x[</span><span class="p">,</span><span class="m">2</span><span class="n">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">ggplot</span><span class="p">(</span><span class="n">PCA_data</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">u</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">v</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="nf">rgb</span><span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">G</span><span class="p">,</span><span class="n">B</span><span class="p">)))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_point</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">2</span><span class="p">)</span> <span class="o">+</span> <span class="nf">scale_color_identity</span><span class="p">()</span> <span class="o">+</span> <span class="nf">theme_void</span><span class="p">()</span>
</span></span></code></pre></div><img src="./PCA_crop_bw.png" alt="Favicon">
<figcaption>Figure 7. PCA for Cropped Moomin results.</figcaption>
<img src="./comparison_2.png" alt="Favicon">
<figcaption>Figure 8. Comparison of cropped vs non-cropped color values for the Moomin.</figcaption>
<h2 id="playing-with-color-data-in-r">Playing with color data in R</h2>
<p>Typically, you&rsquo;d run tests like the Elbow, Silhouette, or Variance Ratio methods to determine the optimal value of &lsquo;K.&rsquo; However, in my experience, these tests aren’t very useful when working with images—you just have to go with the vibes.</p>
<p>Or you can plot it.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="c1">## Convert pre-processed Magick array object to data.frame</span>
</span></span><span class="line"><span class="cl"><span class="n">res_df</span> <span class="o">&lt;-</span> <span class="nf">rgb_from_array_to_df</span><span class="p">(</span><span class="n">crop_img_magick.png_data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Set N of K&#39;s</span>
</span></span><span class="line"><span class="cl"><span class="n">k_values</span> <span class="o">&lt;-</span> <span class="m">1</span><span class="o">:</span><span class="m">500</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Apply clara for each k</span>
</span></span><span class="line"><span class="cl"><span class="n">df_final</span> <span class="o">&lt;-</span> <span class="nf">map_df</span><span class="p">(</span><span class="n">k_values</span><span class="p">,</span> <span class="kr">function</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">clara_result</span> <span class="o">&lt;-</span> <span class="n">cluster</span><span class="o">::</span><span class="nf">clara</span><span class="p">(</span><span class="n">res_df</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="n">k</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">res_df_final</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">colors</span> <span class="o">=</span> <span class="nf">rgb</span><span class="p">(</span><span class="nf">pmax</span><span class="p">(</span><span class="n">clara_result</span><span class="o">$</span><span class="n">medoids</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl">    <span class="n">size</span> <span class="o">=</span> <span class="n">clara_result</span><span class="o">$</span><span class="n">clusinfo[</span><span class="p">,</span> <span class="m">1</span><span class="n">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span> <span class="o">%&gt;%</span>
</span></span><span class="line"><span class="cl">    <span class="nf">arrange</span><span class="p">(</span><span class="nf">desc</span><span class="p">(</span><span class="n">size</span><span class="p">))</span> <span class="o">%&gt;%</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mutate</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="n">colors_factor</span> <span class="o">=</span> <span class="nf">factor</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="n">levels</span> <span class="o">=</span> <span class="n">colors</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">colors</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">      <span class="n">category</span> <span class="o">=</span> <span class="n">k</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">return</span><span class="p">(</span><span class="n">res_df_final</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Plot</span>
</span></span><span class="line"><span class="cl"><span class="n">df_final</span> <span class="o">%&gt;%</span>
</span></span><span class="line"><span class="cl">  <span class="nf">ggplot</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">category</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="n">colors</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_col</span><span class="p">(</span><span class="n">width</span> <span class="o">=</span> <span class="m">1</span><span class="p">)</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="nf">scale_fill_identity</span><span class="p">()</span>
</span></span></code></pre></div><img src="./k_100.png" alt="Favicon">
<figcaption>Figure 9. Clustering colors for K from 1 to 100.</figcaption>
<p>You can also change the clustering method you are using. Instead of K-means you could try Hierarchical Clustering or Density-Based Spatial Clustering of Applications with Noise (DBSCAN).</p>
<h2 id="interesting-things-i-found-while-playing-with-colors-in-r">Interesting things I found while playing with colors in R</h2>
<p>There is a surprising amount of <a href="https://acp.copernicus.org/articles/14/2987/2014/" target="_blank" rel="noopener">environmental information you can extract from paintings</a>.</p>
<p>For example, <a href="https://www.pnas.org/doi/10.1073/pnas.2219118120" target="_blank" rel="noopener">paintings by Turner and Monet can tell us a lot about trends in 19th century air pollution</a>.</p>
<p>Cath Sleeman did an <a href="https://lab.sciencemuseum.org.uk/colour-shape-using-computer-vision-to-explore-the-science-museum-c4b4f1cbd72c" target="_blank" rel="noopener">amazing visualization</a> on how the colors used in every day objects has evolved over the past 2 centuries. Spoilers: <a href="https://www.thecollector.com/minimalism-color-grey/" target="_blank" rel="noopener">Life is getting grey</a>.</p>
<p>It kind of looks like the grey-ish dark mud color you get when mixing too many colors.</p>
<h2 id="footnote">Footnote</h2>
<p>The picture of this post comes from this song:</p>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/NMiQmumW0nI?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<p>I couldn&rsquo;t find a single blog post or page that answered and covered everything I needed for me to write the code to work with colors.</p>
<p>Everything that contributed towards my code is in the references.</p>
<p>If it was within my tabs in my browser, it was probably important.</p>
<p>(If you are reading this, I haven&rsquo;t really cleaned up the references, sorry.)</p>
<h2 id="references">References</h2>
<p><a href="https://rwalk.xyz/color-quantization-in-r/" target="_blank" rel="noopener">https://rwalk.xyz/color-quantization-in-r/</a></p>
<p><a href="https://cran.r-project.org/web/packages/countcolors/vignettes/Introduction.html" target="_blank" rel="noopener">https://cran.r-project.org/web/packages/countcolors/vignettes/Introduction.html</a></p>
<p><a href="https://hiweller.rbind.io/publication/" target="_blank" rel="noopener">https://hiweller.rbind.io/publication/</a></p>
<p><a href="https://github.com/hiweller/recolorize" target="_blank" rel="noopener">https://github.com/hiweller/recolorize</a></p>
<p><a href="https://github.com/StevenVB12/patternize" target="_blank" rel="noopener">https://github.com/StevenVB12/patternize</a></p>
<p><a href="https://stackoverflow.com/questions/40518577/extracting-the-dominant-colour-in-an-image" target="_blank" rel="noopener">https://stackoverflow.com/questions/40518577/extracting-the-dominant-colour-in-an-image</a></p>
<p><a href="https://stackoverflow.com/questions/77901926/extract-dominant-colors-from-image-in-r" target="_blank" rel="noopener">https://stackoverflow.com/questions/77901926/extract-dominant-colors-from-image-in-r</a></p>
<p><a href="https://stackoverflow.com/questions/42098307/color-extraction-quantification-and-analysis-from-image-in-r" target="_blank" rel="noopener">https://stackoverflow.com/questions/42098307/color-extraction-quantification-and-analysis-from-image-in-r</a></p>
<p><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC5945207/" target="_blank" rel="noopener">https://pmc.ncbi.nlm.nih.gov/articles/PMC5945207/</a></p>
<p><a href="https://github.com/EmilHvitfeldt/quickpalette/tree/master" target="_blank" rel="noopener">https://github.com/EmilHvitfeldt/quickpalette/tree/master</a></p>
<p><a href="https://github.com/okaneco/kmeans-colors" target="_blank" rel="noopener">https://github.com/okaneco/kmeans-colors</a></p>
<p><a href="https://tatasz.github.io/dominant_colors/" target="_blank" rel="noopener">https://tatasz.github.io/dominant_colors/</a></p>
<p><a href="https://medium.com/@ys3372/deconstructing-an-image-with-pixels-4c65c3a2268c" target="_blank" rel="noopener">https://medium.com/@ys3372/deconstructing-an-image-with-pixels-4c65c3a2268c</a></p>
<p><a href="https://rpubs.com/folwalsh/clusteringimages" target="_blank" rel="noopener">https://rpubs.com/folwalsh/clusteringimages</a></p>

      </div>

      
  <time class="mt-12 mb-8 block text-xs text-gray-500 ltr:text-right rtl:text-left dark:text-gray-400" datetime="2024-12-22T00:00:00.000Z">
    <span>Last updated on</span>
    Dec 22, 2024</time>

      <div class="container mx-auto prose prose-slate lg:prose-xl dark:prose-invert mt-5">
        
        <div class="max-w-prose print:hidden">
  
  

  

<div class="flex justify-center">
  
  <a class="no-underline bg-primary-100 hover:bg-primary-300 text-primary-800 text-xs font-medium mr-2 px-2.5 py-0.5 lg:px-5 lg:py-2 rounded dark:bg-primary-900 dark:hover:bg-primary-700 dark:text-primary-300" href="/tags/r-code/">R Code</a>
  
  <a class="no-underline bg-primary-100 hover:bg-primary-300 text-primary-800 text-xs font-medium mr-2 px-2.5 py-0.5 lg:px-5 lg:py-2 rounded dark:bg-primary-900 dark:hover:bg-primary-700 dark:text-primary-300" href="/tags/data/">Data</a>
  
  <a class="no-underline bg-primary-100 hover:bg-primary-300 text-primary-800 text-xs font-medium mr-2 px-2.5 py-0.5 lg:px-5 lg:py-2 rounded dark:bg-primary-900 dark:hover:bg-primary-700 dark:text-primary-300" href="/tags/viz/">Viz</a>
  
</div>


  
<section class="flex flex-row flex-wrap justify-center pt-4 text-xl">
  

  
  
  
  
  
  
  <a
    target="_blank" rel="noopener"
    class="m-1 rounded-md bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral-300 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
    href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fjruizcabrejos.com%2Fpost%2Fplaying-with-colors-20241222%2F&amp;text=Playing&#43;with&#43;colors&#43;in&#43;R"
    title="X"
    aria-label="X"
    id="share-link-x"
  >
    <svg style="height: 1em;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
  </a>
  

  
  
  
  
  
  
  <a
    target="_blank" rel="noopener"
    class="m-1 rounded-md bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral-300 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
    href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fjruizcabrejos.com%2Fpost%2Fplaying-with-colors-20241222%2F&amp;t=Playing&#43;with&#43;colors&#43;in&#43;R"
    title="Facebook"
    aria-label="Facebook"
    id="share-link-facebook"
  >
    <svg style="height: 1em;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95z"/></svg>
  </a>
  

  
  
  
  
  
  
    
  
  <a
    target="_blank" rel="noopener"
    class="m-1 rounded-md bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral-300 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
    href="mailto:?subject=Playing%20with%20colors%20in%20R&amp;body=https%3A%2F%2Fjruizcabrejos.com%2Fpost%2Fplaying-with-colors-20241222%2F"
    title="Email"
    aria-label="Email"
    id="share-link-email"
  >
    <svg style="height: 1em;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M16.5 12a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0Zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 1 0-2.636 6.364M16.5 12V8.25"/></svg>
  </a>
  

  
  
  
  
  
  
  <a
    target="_blank" rel="noopener"
    class="m-1 rounded-md bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral-300 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
    href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fjruizcabrejos.com%2Fpost%2Fplaying-with-colors-20241222%2F&amp;title=Playing&#43;with&#43;colors&#43;in&#43;R"
    title="LinkedIn"
    aria-label="LinkedIn"
    id="share-link-linkedin"
  >
    <svg style="height: 1em;" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
  </a>
  

  
  
  
  
  
  
  <a
    target="_blank" rel="noopener"
    class="m-1 rounded-md bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral-300 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
    href="whatsapp://send?text=Playing&#43;with&#43;colors&#43;in&#43;R%20https%3A%2F%2Fjruizcabrejos.com%2Fpost%2Fplaying-with-colors-20241222%2F"
    title="WhatsApp"
    aria-label="WhatsApp"
    id="share-link-whatsapp"
  >
    <svg style="height: 1em;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor"><path d="m187.58 144.84-32-16a8 8 0 0 0-8 .5l-14.69 9.8a40.55 40.55 0 0 1-16-16l9.8-14.69a8 8 0 0 0 .5-8l-16-32A8 8 0 0 0 104 64a40 40 0 0 0-40 40 88.1 88.1 0 0 0 88 88 40 40 0 0 0 40-40 8 8 0 0 0-4.42-7.16ZM152 176a72.08 72.08 0 0 1-72-72 24 24 0 0 1 19.29-23.54l11.48 23L101 118a8 8 0 0 0-.73 7.51 56.47 56.47 0 0 0 30.15 30.15A8 8 0 0 0 138 155l14.61-9.74 23 11.48A24 24 0 0 1 152 176ZM128 24a104 104 0 0 0-91.82 152.88l-11.35 34.05a16 16 0 0 0 20.24 20.24l34.05-11.35A104 104 0 1 0 128 24Zm0 192a87.87 87.87 0 0 1-44.06-11.81 8 8 0 0 0-6.54-.67L40 216l12.47-37.4a8 8 0 0 0-.66-6.54A88 88 0 1 1 128 216Z"/></svg>
  </a>
  
</section>


  








  
  
    



  
  
  
    
  
  
  

<div class="flex pt-12 pb-4">
  
  
  <img
    class="mr-4 h-24 w-24 rounded-full"
    width="96"
    height="96"
  src="/author/avatar_hu11539481118686205348.jpg"
  loading="lazy"
  />
  
  <div class="place-self-center">
    <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
      Authors
    </div>
    <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
      <a href="https://jruizcabrejos.com/" class="no-underline">
      </a>
    </div>
    
    <div class="text-sm font-bold text-neutral-700 dark:text-neutral-300">
    Jorge Ruiz Cabrejos
    </div>
    


    

    <div class="text-2xl sm:text-lg pt-1">

      
<div class="flex flex-wrap text-neutral-500 dark:text-neutral-300">
  
    
    
    
    
      
    
    <a
      class="pr-2 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
      style="will-change:transform;"
      href="https://github.com/jruizcabrejos"
      target="_blank" rel="noopener" rel="me noopener noreferrer"
      aria-label="Brands/Github"
    ><svg style="height: 1em;" fill="currentColor" viewBox="3 3 18 18"><path d="M12 3C7.0275 3 3 7.12937 3 12.2276C3 16.3109 5.57625 19.7597 9.15374 20.9824C9.60374 21.0631 9.77249 20.7863 9.77249 20.5441C9.77249 20.3249 9.76125 19.5982 9.76125 18.8254C7.5 19.2522 6.915 18.2602 6.735 17.7412C6.63375 17.4759 6.19499 16.6569 5.8125 16.4378C5.4975 16.2647 5.0475 15.838 5.80124 15.8264C6.51 15.8149 7.01625 16.4954 7.18499 16.7723C7.99499 18.1679 9.28875 17.7758 9.80625 17.5335C9.885 16.9337 10.1212 16.53 10.38 16.2993C8.3775 16.0687 6.285 15.2728 6.285 11.7432C6.285 10.7397 6.63375 9.9092 7.20749 9.26326C7.1175 9.03257 6.8025 8.08674 7.2975 6.81794C7.2975 6.81794 8.05125 6.57571 9.77249 7.76377C10.4925 7.55615 11.2575 7.45234 12.0225 7.45234C12.7875 7.45234 13.5525 7.55615 14.2725 7.76377C15.9937 6.56418 16.7475 6.81794 16.7475 6.81794C17.2424 8.08674 16.9275 9.03257 16.8375 9.26326C17.4113 9.9092 17.76 10.7281 17.76 11.7432C17.76 15.2843 15.6563 16.0687 13.6537 16.2993C13.98 16.5877 14.2613 17.1414 14.2613 18.0065C14.2613 19.2407 14.25 20.2326 14.25 20.5441C14.25 20.7863 14.4188 21.0746 14.8688 20.9824C16.6554 20.364 18.2079 19.1866 19.3078 17.6162C20.4077 16.0457 20.9995 14.1611 21 12.2276C21 7.12937 16.9725 3 12 3Z"></path></svg></a>
  
    
    
    
    
      
    
    <a
      class="pr-2 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
      style="will-change:transform;"
      href="https://discord.gg/efzMK4YfAW"
      target="_blank" rel="noopener" rel="me noopener noreferrer"
      aria-label="Brands/Discord"
    ><svg style="height: 1em;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"></path></svg></a>
  
    
    
    
    
      
    
    <a
      class="pr-2 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
      style="will-change:transform;"
      href="https://bsky.app/profile/jruizcabrejos.bsky.social"
      target="_blank" rel="noopener" rel="me noopener noreferrer"
      aria-label="Brands/Bluesky"
    ><svg style="height: 1em;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 568 501"> <path fill="currentColor" d="M123.121 33.6637C188.241 82.5526 258.281 181.681 284 234.873C309.719 181.681 379.759 82.5526 444.879 33.6637C491.866 -1.61183 568 -28.9064 568 57.9464C568 75.2916 558.055 203.659 552.222 224.501C531.947 296.954 458.067 315.434 392.347 304.249C507.222 323.8 536.444 388.56 473.333 453.32C353.473 576.312 301.061 422.461 287.631 383.039C285.169 375.812 284.017 372.431 284 375.306C283.983 372.431 282.831 375.812 280.369 383.039C266.939 422.461 214.527 576.312 94.6667 453.32C31.5556 388.56 60.7778 323.8 175.653 304.249C109.933 315.434 36.0535 296.954 15.7778 224.501C9.94525 203.659 0 75.2916 0 57.9464C0 -28.9064 76.1345 -1.61183 123.121 33.6637Z"/></svg></a>
  
    
    
    
    
      
    
    <a
      class="pr-2 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
      style="will-change:transform;"
      href="https://www.linkedin.com/in/jorge-ruiz-cabrejos-4a3230a1/"
      target="_blank" rel="noopener" rel="me noopener noreferrer"
      aria-label="Brands/Linkedin"
    ><svg style="height: 1em;" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg></a>
  
    
    
    
    
      
    
    <a
      class="pr-2 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
      style="will-change:transform;"
      href="https://scholar.google.es/citations?user=lQnRBGcAAAAJ"
      target="_blank" rel="noopener" rel="me noopener noreferrer"
      aria-label="Academicons/Google-Scholar"
    ><svg style="height: 1em;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M343.759 106.662V79.43L363.524 64h-213.89L20.476 176.274h85.656a82.339 82.339 0 0 0-.219 6.225c0 20.845 7.22 38.087 21.672 51.861c14.453 13.797 32.252 20.648 53.327 20.648c4.923 0 9.75-.368 14.438-1.024c-2.907 6.5-4.374 12.523-4.374 18.142c0 9.875 4.499 20.43 13.467 31.642c-39.234 2.67-68.061 9.732-86.437 21.163c-10.531 6.5-19 14.704-25.39 24.531c-6.391 9.9-9.578 20.515-9.578 31.962c0 9.648 2.062 18.336 6.219 26.062c4.156 7.726 9.578 14.07 16.312 18.984c6.718 4.968 14.469 9.101 23.219 12.469c8.734 3.344 17.406 5.718 26.061 7.062A167.052 167.052 0 0 0 180.555 448c13.469 0 26.953-1.734 40.547-5.187c13.562-3.485 26.28-8.642 38.171-15.493c11.86-6.805 21.515-16.086 28.922-27.718c7.39-11.68 11.094-24.805 11.094-39.336c0-11.016-2.25-21.039-6.75-30.14c-4.468-9.073-9.938-16.542-16.452-22.345c-6.501-5.813-13-11.155-19.516-15.968c-6.5-4.845-12-9.75-16.468-14.813c-4.485-5.046-6.735-10.054-6.735-14.984c0-4.921 1.734-9.672 5.216-14.265c3.455-4.61 7.674-9.048 12.61-13.306c4.937-4.25 9.875-8.968 14.796-14.133c4.922-5.147 9.141-11.827 12.61-20.008c3.485-8.18 5.203-17.445 5.203-27.757c0-13.453-2.547-24.46-7.547-33.314c-.594-1.022-1.218-1.803-1.875-3.022l56.907-46.672v17.119c-7.393.93-6.624 5.345-6.624 10.635V245.96c0 5.958 4.875 10.834 10.834 10.834h3.989c5.958 0 10.833-4.875 10.833-10.834V117.293c0-5.277.778-9.688-6.561-10.63zm-107.36 222.48c1.14.75 3.704 2.78 7.718 6.038c4.05 3.243 6.797 5.695 8.266 7.414a443.553 443.553 0 0 1 6.376 7.547c2.813 3.375 4.718 6.304 5.718 8.734c1 2.477 2.016 5.461 3.047 8.946a38.27 38.27 0 0 1 1.485 10.562c0 17.048-6.564 29.68-19.656 37.859c-13.125 8.18-28.767 12.274-46.938 12.274c-9.187 0-18.203-1.093-27.063-3.196c-8.843-2.116-17.311-5.336-25.39-9.601c-8.078-4.258-14.577-10.204-19.5-17.797c-4.938-7.64-7.407-16.415-7.407-26.25c0-10.32 2.797-19.29 8.422-26.906c5.594-7.625 12.938-13.391 22.032-17.315c9.063-3.946 18.25-6.742 27.562-8.398a157.865 157.865 0 0 1 28.438-2.555c4.47 0 7.936.25 10.405.696c.455.219 3.032 2.07 7.735 5.563c4.704 3.462 7.625 5.595 8.75 6.384zm-3.359-100.579c-7.406 8.86-17.734 13.288-30.953 13.288c-11.86 0-22.298-4.764-31.266-14.312c-9-9.523-15.422-20.328-19.344-32.43c-3.937-12.109-5.906-23.984-5.906-35.648c0-13.694 3.596-25.352 10.781-34.976c7.187-9.65 17.5-14.485 30.938-14.485c11.875 0 22.374 5.038 31.437 15.157c9.094 10.085 15.61 21.413 19.517 33.968c3.922 12.54 5.873 24.53 5.873 35.984c0 13.446-3.702 24.61-11.076 33.454z"/></svg></a>
  
    
    
    
    
      
    
    <a
      class="pr-2 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
      style="will-change:transform;"
      href="https://orcid.org/0000-0002-2055-3396"
      target="_blank" rel="noopener" rel="me noopener noreferrer"
      aria-label="Academicons/Orcid"
    ><svg style="height: 1em;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M336.62 194.538c-7.13-3.328-13.866-5.56-20.253-6.614c-6.365-1.095-16.574-1.612-30.71-1.612h-36.704v152.747h37.634c14.673 0 26.081-1.013 34.224-3.017c8.142-2.004 14.921-4.526 20.356-7.626a69.448 69.448 0 0 0 14.942-11.388c14.488-14.714 21.742-33.273 21.742-55.717c0-22.052-7.44-40.052-22.341-53.982c-5.498-5.166-11.822-9.444-18.89-12.793zM256 8C119.022 8 8 119.042 8 256s111.022 248 248 248s248-111.042 248-248S392.978 8 256 8Zm-82.336 357.513h-29.389V160.148h29.389zM158.95 138.696c-11.14 0-20.213-9.01-20.213-20.212c0-11.118 9.052-20.191 20.213-20.191c11.18 0 20.232 9.052 20.232 20.191a20.194 20.194 0 0 1-20.232 20.212zm241.386 163.597c-5.29 12.545-12.834 23.581-22.65 33.088c-9.982 9.837-21.597 17.194-34.844 22.196c-7.75 3.017-14.839 5.063-21.307 6.117c-6.49 1.013-18.828 1.509-37.076 1.509h-64.956V160.148h69.233c27.962 0 50.034 4.154 66.32 12.545c16.265 8.37 29.181 20.728 38.792 36.972c9.61 16.265 14.425 34.018 14.425 53.196c.023 13.765-2.666 26.908-7.936 39.432z"/></svg></a>
  
</div>



    </div>
  </div>
</div>



  




  
  
    
    
    
      
      
    
<div class="pt-1 no-prose w-full">
  <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
  <div class="flex flex-col md:flex-row flex-nowrap justify-between gap-5 pt-2">
    <div class="">
      
        <a class="group flex no-underline" href="/post/accessible-frugality-barcelona-trash-collection-data-20250201/">
          <span
            class="mt-[-0.3rem] me-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"
          ><span class="ltr:inline rtl:hidden">&larr;</span></span>
          <span class="flex flex-col">
            <span
              class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
            >Accesibble Frugality: Barcelona Trastos Data</span>
            <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
              
                Feb 1, 2025
              
            </span>
          </span>
        </a>
      
    </div>
    <div class="">
      
        <a class="group flex text-right no-underline" href="/post/if-it-is-art-it-is-legal-20241215/">
          <span class="flex flex-col">
            <span
              class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
            >If it is art, it is fair use</span
            >
            <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
              
                Dec 15, 2024
              
            </span>
          </span>
          <span
            class="mt-[-0.3rem] ms-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"
          ><span class="ltr:inline">&rarr;</span></span>
        </a>
      
    </div>
  </div>
</div>



  


  



</div>

      </div>

    </main>
  </article>
</div>

    </div>
    <div class="page-footer">
      <footer class="container mx-auto flex flex-col justify-items-center text-sm leading-6 mt-24 mb-4 text-slate-700 dark:text-slate-200">

  












  
  
  
  
  














  
  
  

  
  
    
  
  
    
  

  

  
  <p class="powered-by text-center">
    © 2025 Jorge Ruiz-Cabrejos. This work is licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank">CC BY NC ND 4.0</a>
  </p>
  

  <p class="powered-by footer-license-icons">
    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank" aria-label="Creative Commons">
      <i class="fab fa-creative-commons fa-2x" aria-hidden="true"></i>
      <i class="fab fa-creative-commons-by fa-2x" aria-hidden="true"></i>
      
        <i class="fab fa-creative-commons-nc fa-2x" aria-hidden="true"></i>
      
      
        <i class="fab fa-creative-commons-nd fa-2x" aria-hidden="true"></i>
      
    </a>
  </p>





  <p class="powered-by text-center">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://hugoblox.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Hugo Blox Builder</a> — the free, <a href="https://github.com/HugoBlox/hugo-blox-builder" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>

</footer>

    </div>

    
    











  </body>
</html>
